<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free LLM Router Microservice - Monitor and test your LLM routing service">
    <title>LLM Router Dashboard</title>
    <script>
        (function () {
            var p = window.location.pathname || '/';
            if (!p.endsWith('/')) {
                p = p + '/';
            }
            document.write('<base href="' + p.replace(/\"/g, '%22') + '">');
        })();
    </script>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon">ü§ñ</div>
                    <div>
                        <h1>LLM Router</h1>
                        <p class="subtitle">Microservice Dashboard</p>
                    </div>
                </div>
                <div class="header-stats">
                    <div class="stat-pill">
                        <span class="stat-label">Uptime</span>
                        <span class="stat-value" id="uptime">--</span>
                    </div>
                    <div class="stat-pill">
                        <span class="stat-label">Status</span>
                        <span class="stat-value status-indicator" id="service-status">
                            <span class="status-dot"></span>
                            <span>Checking...</span>
                        </span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tabs">
            <button class="tab-button active" data-tab="overview">
                <span class="tab-icon">üìä</span>
                Overview
            </button>
            <button class="tab-button" data-tab="models">
                <span class="tab-icon">üéØ</span>
                Models State
            </button>
            <button class="tab-button" data-tab="test">
                <span class="tab-icon">üß™</span>
                API Tester
            </button>
            <button class="tab-button" data-tab="rate-limits">
                <span class="tab-icon">‚è±Ô∏è</span>
                Rate Limits
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Overview Tab -->
            <section id="tab-overview" class="tab-content active">
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-icon">üìà</span>
                            <h3>Total Requests</h3>
                        </div>
                        <div class="metric-value" id="total-requests">0</div>
                        <div class="metric-details">
                            <span class="metric-detail success">
                                <span class="detail-icon">‚úì</span>
                                <span id="successful-requests">0</span> successful
                            </span>
                            <span class="metric-detail error">
                                <span class="detail-icon">‚úó</span>
                                <span id="failed-requests">0</span> failed
                            </span>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-icon">‚ö°</span>
                            <h3>Avg Latency</h3>
                        </div>
                        <div class="metric-value" id="avg-latency">0<span class="unit">ms</span></div>
                        <div class="metric-details">
                            <span class="metric-detail">
                                Response time across all models
                            </span>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-header">
                            <span class="metric-icon">üîÑ</span>
                            <h3>Fallbacks Used</h3>
                        </div>
                        <div class="metric-value" id="fallbacks-used">0</div>
                        <div class="metric-details">
                            <span class="metric-detail">
                                Automatic failover count
                            </span>
                        </div>
                    </div>



                    <div class="metric-card wide">
                        <div class="metric-header">
                            <span class="metric-icon">üéØ</span>
                            <h3>Models Status</h3>
                        </div>
                        <div class="models-status-grid">
                            <div class="status-item">
                                <div class="status-count available" id="models-available">0</div>
                                <div class="status-label">Available</div>
                            </div>
                            <div class="status-item">
                                <div class="status-count warning" id="models-open">0</div>
                                <div class="status-label">Circuit Open</div>
                            </div>
                            <div class="status-item">
                                <div class="status-count error" id="models-unavailable">0</div>
                                <div class="status-label">Unavailable</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Models State Tab -->
            <section id="tab-models" class="tab-content">
                <div class="section-header">
                    <h2>Model States</h2>
                    <button class="refresh-button" id="refresh-models">
                        <span class="refresh-icon">‚Üª</span>
                        Refresh
                    </button>
                </div>
                <div id="models-list" class="models-list">
                    <div class="loading-state">Loading models...</div>
                </div>
            </section>

            <!-- API Tester Tab -->
            <section id="tab-test" class="tab-content">
                <div class="tester-container">
                    <div class="tester-panel">
                        <h2>Request Configuration</h2>

                        <div class="form-group">
                            <label for="test-model">Model</label>
                            <input type="text" id="test-model" placeholder="e.g., gpt-4, auto" value="auto">
                            <span class="form-hint">Use 'auto' for smart routing</span>
                        </div>

                        <div class="form-group">
                            <label for="test-message">Message</label>
                            <textarea id="test-message" rows="4"
                                placeholder="Enter your test message">Hello! How are you?</textarea>
                        </div>

                        <!-- Multimodal Support -->
                        <div class="form-group">
                            <label>Multimodal Input (Optional)</label>

                            <!-- Image -->
                            <div class="multimodal-input-group" style="margin-bottom: 0.5rem;">
                                <input type="text" id="test-image-url" placeholder="Image URL (e.g. .jpg, .png)">
                                <select id="test-image-detail" style="width: auto; min-width: 80px;">
                                    <option value="auto">Auto</option>
                                    <option value="low">Low</option>
                                    <option value="high">High</option>
                                </select>
                            </div>

                            <!-- Video -->
                            <div class="multimodal-input-group" style="margin-bottom: 0.5rem;">
                                <input type="text" id="test-video-url" placeholder="Video URL (e.g. .mp4)">
                            </div>

                            <!-- Audio -->
                            <div class="multimodal-input-group" style="margin-bottom: 0.5rem;">
                                <input type="text" id="test-audio-url" placeholder="Audio URL (e.g. .mp3, .wav)">
                            </div>

                            <!-- File -->
                            <div class="multimodal-input-group">
                                <input type="text" id="test-file-url" placeholder="File/PDF URL">
                            </div>

                            <span class="form-hint">Ensure the selected model supports the specific modality</span>
                        </div>

                        <!-- Streaming Support -->
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="test-streaming">
                                <span>Enable Streaming</span>
                            </label>
                            <span class="form-hint">Stream tokens as they are generated</span>
                        </div>

                        <!-- Tools Support -->
                        <div class="form-group">
                            <label for="test-tools">Tools (Function Calling)</label>
                            <textarea id="test-tools" rows="6"
                                placeholder='[{"type":"function","function":{"name":"get_weather","description":"Get weather","parameters":{"type":"object","properties":{"location":{"type":"string"}}}}}]'></textarea>
                            <span class="form-hint">Optional: JSON array of tools for function calling</span>
                        </div>

                        <div class="form-group">
                            <label for="test-temperature">Temperature</label>
                            <input type="range" id="test-temperature" min="0" max="2" step="0.1" value="0.7">
                            <span class="range-value" id="temp-value">0.7</span>
                        </div>

                        <div class="form-group">
                            <label for="test-max-tokens">Max Tokens</label>
                            <input type="number" id="test-max-tokens" min="1" max="4096" value="150">
                        </div>

                        <button class="primary-button" id="send-test-request">
                            <span class="button-icon">üöÄ</span>
                            Send Request
                        </button>
                    </div>

                    <div class="tester-panel">
                        <h2>Response</h2>
                        <div id="test-response" class="response-container">
                            <div class="empty-state">
                                <span class="empty-icon">üì≠</span>
                                <p>No response yet. Send a test request to see results.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Rate Limits Tab -->
            <section id="tab-rate-limits" class="tab-content">
                <div class="section-header">
                    <h2>Rate Limiting Status</h2>
                    <button class="refresh-button" id="refresh-rate-limits">
                        <span class="refresh-icon">‚Üª</span>
                        Refresh
                    </button>
                </div>
                <div id="rate-limits-container" class="rate-limits-container">
                    <div class="loading-state">Loading rate limits...</div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Free LLM Router Microservice Dashboard</p>
            <p class="footer-meta">Last updated: <span id="last-update">--</span></p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>

</html>